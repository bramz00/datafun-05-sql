# datafun-05-sql

This project partially completes the requirements for datafun-05-spec.
Python Standard Library

The project uses these packages from the Python Standard Library:

    pathlib - to work with folders and files
    sqlite3 - to work with a Sqlite file-based database

If you want to avoid using a project virtual environment, it is possible to use the csv module from the Python Standard Library to read csv files.
External Packages & Project Virtual Environment

To work with csv files using a bit cleaner code, we choose to use pandas, an external library, not part of the Python Standard Library. Therefore, this project requires a project virtual environment, which we recommend creating in the .venv folder.
Organization

This project organizes SQL scripts and Python scripts into separate folders to ensure a structured and maintainable workflow for database management.

    data/ – Stores the SQLite database (db.sqlite).
    sql_create/ – Contains SQL scripts for database setup:
        01_drop_tables.sql – Drops any existing tables
        02_create_tables.sql – Creates tables
        03_insert_records.sql – Inserts initial data
    sql_features/ – Contains SQL scripts for feature engineering and schema modifications.
    sql_analytics/ – Contains SQL scripts for analytics queries and aggregations.

Run Scripts

First: Create a virtual environment, activate it, and install requirements.txt (see requirements.txt for commands).

    Activate the .venv
    Run the Python file

Windows Example

.\.venv\Scripts\activate
py db01_setup.py

Mac/Linux Example

source .venv/bin/activate
python3 db01_setup.py



Database schema:
datafun-05-sql/
├── datafun.db                 # SQLite database file (generated by Python scripts)
├── authors.csv                # Source CSV file for authors
├── books.csv                  # Source CSV file for books
├── .gitignore
├── README.md
├── requirements.txt
├── db01_setup.py             # Creates database, drops tables, creates tables, inserts data
├── db02_update_delete.py     # Executes update_records.sql and delete_records.sql
├── db03_run_queries.py       # Executes all SQL query files and prints results
│
├── sql_create/
│   ├── 01_drop_tables.sql    # SQL to drop existing tables
│   ├── 02_create_tables.sql  # SQL to create authors and books tables
│   ├── 03_insert_records.sql # SQL to insert sample records
│   ├── update_records.sql    # SQL to update existing records (e.g., replace "and" with "&")
│   └── delete_records.sql    # SQL to delete specific records (e.g., by title)
│
├── sql_queries/
│   ├── query_aggregation.sql # COUNT, AVG, SUM queries
│   ├── query_filter.sql      # Queries using WHERE
│   ├── query_sorting.sql     # Queries using ORDER BY
│   ├── query_group_by.sql    # Queries using GROUP BY
│   └── query_join.sql        # INNER JOIN and LEFT JOIN queries

